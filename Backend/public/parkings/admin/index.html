<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista Estacionamiento</title>
    <link rel="stylesheet" href="./index.css">
</head>
<body>
    <section>
        <h1>Lista de Estacionaminetos</h1>
        <div id="response"></div>
    </section>

    <div id="parkings"></div>

</body>

<script src="/socket.io/socket.io.js"></script>

<script>
    const socket = io("http://localhost:3000")
    const root = document.getElementById("parkings")

    const renderParkings = (data) => {
        root.innerHTML = ""
        const { parkings } = data

        parkings.map(({ _id, name, status }) => {
            root.innerHTML += `
                <div class="card">
                    <div class="${status}">
                        <p>${name}</p>
                        <p>${status}</p>
                    </div>
                </div>
            `
        })
    }

    socket.on("connect", () => {
        socket.emit("join-admin")
    })

    socket.on("all-parkings", (data) => {
        renderParkings(data)
    })

</script>
</html>